
- 히스토리 
클래스명(패키지포함), 메소드명, GUID, 유입단IP, 서비스 수행시간, 인터페이스ID, 서비스ID, 화면ID
형식으로 로그남기는 요구사항 옴 
interceptor 이용해서 로그 남길거임 
preHandler -> controller -> postHandler -> mvc 
이런 순으로 로직이 탐 
*****
클래스명, 메소드명 : handler.toString
유입단ip	: HttpServletRequest reqeust.getRemoteAddr()
서비스수행시간 : StopWatch sw.getTotalTimeMillis()
서비스id 	: HttpServletRequest request.getRequestURI()
화면id		: ModelAndView modelAndView.getViewName 
******

PerfLogInterceptor.java

public class ActionLogInterceptor extends HandlerInterceptorAdapter {
	private static Logger log = Logger.getLogger("PERF_LOG");
	
	private StopWatch sw;

	@Override
	public boolean preHandler(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable ModelAndView modelAndView) throws Exception {
		sw = new StopWatch();
		sw.start();
		return true;
	}
	

	@Override
	public void postHandler(HttpServletRequest request, HttpServletResponse response, Object handler, @Nullable ModelAndView modelAndView) throws Exception {
		log.debug("========: " + handler.toString();
//		MultiReadHttpServletRequest req = new MultiReadHttpServletRequest((HttpServletRequest)request);
//		new ActionLogSerivce().makeLog(req);
		
		String strClassPath = hanlder.toString().split("#")[0];
		String strMethodName = handler.toString().split("#")[1];
		strMethodName = strMethodName.subString(0, strMethodName.indexOd("("));
		log.info(strClassPath + "," + strMethodName + "," + request.getRemoteAddr() + "," + sw.getTotalTimeMillis() + ",," + request.getRequestURL() + "," + modelAndView.getViewName() + (modelAndView.getViewName().contains(".do")?"":".jsp"));
	}

	@Override
	public void afterCompletion( ...
	}


Common-servlet.xml
	<mvc:interceptors>
		<mvc:interceptor>
			<mvc:mapping path="/**" />
			<bean id="perfLogInterceptor" class="com.sc.gf.perfLog.PerfLogInterceptor" />
		</mvc:interceptor>
	</mvc:interceptors>



log4j.xml
<appender name="PERF_LOG_APPENDER" class="org.apache.log4j.rolling.RollingFileAppender">
	<param name="append" value="true" />
	<param name="encoding" value="UTF-8" />
	<param name="file" value="/gfinance/wasApps/log/perf_log/easy_perf.log"/>
	<rollingPolicy class="org.apache.log4j.rolling.TimeBaseRollingPolicy">
		<param name="FileNamePattern" value="/gfinance/wasApps/log/perf_log/easy_perf_%d{yyyy-MM-dd}.log" />
	</rollingPolicy>
	<layout class="org.apache.log4j.PatternLayout">
		<param name="CoversionPattern" value=%m%n" />
	</layout>
</appender>

<logger name="PERF_LOG">
		<level value="INFO" />
		<appender-ref ref="PERF_LOG_APPEDNER"/>
</logger>


